{"createdAt":"2023-06-15T08:04:42.190Z","updatedAt":"2023-06-20T09:47:55.000Z","id":"2","name":"ProposalNotifier","active":false,"nodes":[{"parameters":{"rule":{"interval":[{"field":"minutes","minutesInterval":10}]}},"id":"bcfed5a7-279b-47c1-b913-385de5eeae8d","name":"Schedule Trigger","type":"n8n-nodes-base.scheduleTrigger","typeVersion":1,"position":[520,320]},{"parameters":{"url":"https://api.boardroom.info/v1/proposals?indexedAt=desc&limit=100&key=e3634f7681262d6e0269558a6b96fe45","options":{}},"id":"99bf4fec-6380-42d1-b263-5cdd2e757f66","name":"HTTP Request","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[1000,160]},{"parameters":{"conditions":{"number":[{"value1":"={{ $json.startTime.timestamp }}","operation":"largerEqual","value2":"={{ $('Date & Time').item.json.ExecTimestamp }}"}],"string":[{"value1":"={{ $json.currentState }}","value2":"active"}]}},"id":"aa83f974-6ea8-4f3c-8c8b-d6aedcd76359","name":"Filter","type":"n8n-nodes-base.filter","typeVersion":1,"position":[1280,160]},{"parameters":{"fieldToSplitOut":"data","options":{}},"id":"f33094a5-9190-4272-a0bb-bf9f1abc808c","name":"Item Lists","type":"n8n-nodes-base.itemLists","typeVersion":2.1,"position":[1140,160]},{"parameters":{"operation":"subtractFromDate","magnitude":"={{ $json.timestamp }}","timeUnit":"minutes","duration":10,"outputFieldName":"LastTime"},"id":"4ca45127-30af-42dd-baee-babee88c0ac2","name":"Date & Time1","type":"n8n-nodes-base.dateTime","typeVersion":2,"position":[700,160]},{"parameters":{"operation":"formatDate","date":"={{ $json.LastTime }}","format":"X","outputFieldName":"ExecTimestamp","options":{}},"id":"b86a82de-fa83-421d-af44-430b4112f800","name":"Date & Time","type":"n8n-nodes-base.dateTime","typeVersion":2,"position":[860,160]},{"parameters":{"conditions":{"string":[{"value1":"={{ $json.protocol }}","value2":"makerdao"},{"value1":"={{ $json.protocol }}","value2":"optimism"},{"value1":"={{ $json.protocol }}","value2":"bitdao"},{"value1":"={{ $json.protocol }}","value2":"decentraland"},{"value1":"={{ $json.protocol }}","value2":"sushiswap"},{"value1":"={{ $json.protocol }}","value2":"uniswap"},{"value1":"={{ $json.protocol }}","value2":"badgerdao.eth"},{"value1":"={{ $json.protocol }}","value2":"stargatefi"},{"value1":"={{ $json.protocol }}","value2":"ens"},{"value1":"={{ $json.protocol }}","value2":"safedao"},{"value1":"={{ $json.protocol }}","value2":"olympusdao"},{"value1":"={{ $json.protocol }}","value2":"curvefi"},{"value1":"={{ $json.protocol }}","value2":"stakedaoeth"}]},"combineConditions":"OR"},"id":"4e980759-8052-4d06-9d22-8e5a7e4ceb75","name":"Filter1","type":"n8n-nodes-base.filter","typeVersion":1,"position":[1420,160]},{"parameters":{"method":"POST","url":"https://api.textcortex.com/v1/texts/summarizations","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Bearer gAAAAABkjCQvdmvl11ACiCv9N8WLI5X0D-EBd2ZwZDEFjWoqXmAlwvQvasmmAEnaVScQDVHhcBXiL1eRHb3h4cb3f1veHBqgzFn15v8bVdjXgWH-HsBv_M8A0BNjDOCKvbV7dXYi7QPI"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"max_tokens","value":512},{"name":"mode","value":"default"},{"name":"model","value":"sophos-1"},{"name":"n","value":1},{"name":"source_lang","value":"en"},{"name":"target_lang","value":"en"},{"name":"temperature","value":0.7},{"name":"text","value":"={{ $json.content}}"}]},"options":{"redirect":{"redirect":{}},"proxy":""}},"id":"15a62340-ea40-4f81-a48d-46521e3e5611","name":"HTTP Request1","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[1560,160]},{"parameters":{"keepOnlySet":true,"values":{"string":[{"name":"title","value":"={{ $('Filter1').item.json.title }}"},{"name":"protocol","value":"={{ $('Filter1').item.json.protocol }}"},{"name":"adapter","value":"snapshot"},{"name":"url","value":"={{ $('Filter1').item.json.externalUrl }}"},{"name":"summary","value":"={{ $json.data.outputs[0].text }}"},{"name":"boardroomUrl","value":"=https://boardroom.io/{{ $('Filter1').item.json.protocol }}/proposal/{{ $('Filter1').item.json.refId }}"}],"number":[{"name":"endTimeReadable","value":"={{ Date($('Filter1').item.json.endTime.timestamp)}}"},{"name":"endTimestamp","value":"={{ $('Filter1').item.json.endTime.timestamp }}"}]},"options":{}},"id":"70892958-965c-4eca-be36-3007410f7b3b","name":"Set","type":"n8n-nodes-base.set","typeVersion":2,"position":[1700,160]},{"parameters":{"method":"POST","url":"https://app.airops.com/public_api/airops_apps/213/execute/v1","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"Bearer Fn9ucZqVKdYZ82ms0T5upUz-Xvs2uhWBTmpAcg-ugq-nUE2fw0VsWa0ohwAH"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\"inputs\":{\"text\":\"The Paine House Museum is an historic house at 7 Station Street in the village of Washington in the town Coventry, Rhode Island. The oldest portion of this large 2+1‚ÅÑ2-story wood-frame house may have been built as early as 1691 by Samuel Bennett, who was known to operate a sawmill on the nearby Pawtuxet River. The house was significantly enlarged c. 1748 by Francis Brayton. His son, Francis Jr., was granted a license to operate a tavern on the premises in 1785. The property was acquired by the Paine family in 1866, whose descendants gave it to the Western Rhode Island Civic Historical Society in 1953.\"}} ","options":{}},"id":"c3228bd9-92b0-434f-beff-8118ba0bd70f","name":"HTTP Request2","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[1560,0]},{"parameters":{"chatId":"={{ $json.channel }}","text":"=<b>Title</b>\n{{ $json[\"title\"] }}\n\n<b>Vote ends</b>\n{{new Date($json.endTimeReadable).toISOString()}}\n<a href=\"https://www.google.com/calendar/render?action=TEMPLATE&text=Vote%20for%20{{ $json.protocol }}%20proposal&details=&location={{ $json.url }}&dates={{ new Date($json.endTimeReadable).minus(2,'hours').toISOString() }}%2F{{ new Date($json.endTimeReadable).minus(105,'minutes').toISOString() }}&ctz=Europe%2FBerlin\">Add to Google</a> \n\n<b>Vote</b>\n<a href=\"{{ $json.boardroomUrl }}\">Vote on Boardroom</a>\n<a href=\"{{ $json[\"url\"] }}\">Vote on governance tool</a>\n\n<b>AI summary</b>\n{{ $json[\"summary\"] }} \n\n<i> Summary is made with AI tools, details may be missing, for complete understanding please read full proposal</i>","additionalFields":{"disable_web_page_preview":true,"parse_mode":"HTML"}},"id":"159b7df1-916e-4010-a704-ccda7f8cd78d","name":"Telegram","type":"n8n-nodes-base.telegram","typeVersion":1,"position":[2340,180],"credentials":{"telegramApi":{"id":"2","name":"Telegram account"}}},{"parameters":{"mode":"combine","mergeByFields":{"values":[{"field1":"protocol","field2":"dao"}]},"options":{}},"id":"a136e1d3-e90d-4bb1-9d13-4fe5fd1ff901","name":"Merge","type":"n8n-nodes-base.merge","typeVersion":2.1,"position":[1880,180]},{"parameters":{"jsCode":"return [\n  {\n    json: {\n      dao: \"decentraland\",\n      channel : -1001987443998,\n    }\n  },\n];"},"id":"14f7dcd4-49b9-43c5-8d21-b750f81b945f","name":"Code","type":"n8n-nodes-base.code","typeVersion":1,"position":[1700,400]}],"connections":{"Schedule Trigger":{"main":[[{"node":"Date & Time1","type":"main","index":0},{"node":"Code","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"Item Lists","type":"main","index":0}]]},"Item Lists":{"main":[[{"node":"Filter","type":"main","index":0}]]},"Date & Time1":{"main":[[{"node":"Date & Time","type":"main","index":0}]]},"Date & Time":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"Filter":{"main":[[{"node":"Filter1","type":"main","index":0}]]},"Filter1":{"main":[[{"node":"HTTP Request1","type":"main","index":0}]]},"HTTP Request1":{"main":[[{"node":"Set","type":"main","index":0}]]},"Set":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Merge":{"main":[[{"node":"Telegram","type":"main","index":0}]]},"Code":{"main":[[{"node":"Merge","type":"main","index":1}]]}},"settings":{},"staticData":null,"pinData":{},"versionId":"01549f86-c04e-456e-8482-1dfa3098f5c6","triggerCount":0,"tags":[{"createdAt":"2023-06-15T08:04:49.692Z","updatedAt":"2023-06-15T08:04:49.692Z","id":"1","name":"KeyMaker"}],"jsonname":"ProposalNotifier.json"}